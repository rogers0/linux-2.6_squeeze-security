diff -urpN linux-source-2.6.32.orig/include/net/inet_sock.h linux-source-2.6.32/include/net/inet_sock.h
--- linux-source-2.6.32.orig/include/net/inet_sock.h	2013-01-06 16:49:46.716078077 -0700
+++ linux-source-2.6.32/include/net/inet_sock.h	2013-01-06 16:52:08.621396726 -0700
@@ -85,7 +85,11 @@ struct inet_request_sock {
 				acked	   : 1,
 				no_srccheck: 1;
 	kmemcheck_bitfield_end(flags);
+#ifndef __GENKSYMS__
 	struct ip_options_rcu	*opt;
+#else
+	struct ip_options	*opt;
+#endif
 };
 
 static inline struct inet_request_sock *inet_rsk(const struct request_sock *sk)
@@ -130,7 +134,11 @@ struct inet_sock {
 	__be32			saddr;
 	__s16			uc_ttl;
 	__u16			cmsg_flags;
+#ifndef __GENKSYMS__
 	struct ip_options_rcu	*inet_opt;
+#else
+	struct ip_options	*opt;
+#endif
 	__be16			sport;
 	__u16			id;
 	__u8			tos;
diff -urpN linux-source-2.6.32.orig/include/net/ip.h linux-source-2.6.32/include/net/ip.h
--- linux-source-2.6.32.orig/include/net/ip.h	2013-01-06 16:49:46.716078077 -0700
+++ linux-source-2.6.32/include/net/ip.h	2013-01-06 16:52:35.269644736 -0700
@@ -92,7 +92,12 @@ extern int		igmp_mc_proc_init(void);
 
 extern int		ip_build_and_send_pkt(struct sk_buff *skb, struct sock *sk,
 					      __be32 saddr, __be32 daddr,
+#ifndef __GENKSYMS__
 					      struct ip_options_rcu *opt);
+#else
+					      struct ip_options *opt);
+#endif
+
 extern int		ip_rcv(struct sk_buff *skb, struct net_device *dev,
 			       struct packet_type *pt, struct net_device *orig_dev);
 extern int		ip_local_deliver(struct sk_buff *skb);
