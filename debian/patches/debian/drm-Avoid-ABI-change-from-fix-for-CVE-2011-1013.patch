From: Ben Hutchings <ben@decadent.org.uk>
Date: Tue, 1 Mar 2011 01:54:06 +0000
Subject: [PATCH] drm: Avoid ABI change from fix for CVE-2011-1013

---
 include/drm/drmP.h |    5 ++++-
 1 files changed, 4 insertions(+), 1 deletions(-)

diff --git a/include/drm/drmP.h b/include/drm/drmP.h
index c6c8eb9..a8cd0ae 100644
--- a/include/drm/drmP.h
+++ b/include/drm/drmP.h
@@ -1020,7 +1020,10 @@ struct drm_device {
 	struct pci_controller *hose;
 #endif
 	struct drm_sg_mem *sg;	/**< Scatter gather memory */
-	unsigned int num_crtcs;                  /**< Number of CRTCs on this device */
+#ifndef __GENKSYMS__
+	unsigned
+#endif
+	int num_crtcs;                  /**< Number of CRTCs on this device */
 	void *dev_private;		/**< device private data */
 	void *mm_private;
 	struct address_space *dev_mapping;
-- 
1.7.4.1

