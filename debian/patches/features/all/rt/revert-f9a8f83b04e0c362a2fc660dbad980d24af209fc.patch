From: Sebastian Andrzej Siewior <bigeasy@linutronix.de>
Subject: [PATCH] net/cpsw: revert f9a8f83b04e0c362a2fc660dbad980d24af209fc
Origin: https://www.kernel.org/pub/linux/kernel/projects/rt/3.10/patches-3.10.4-rt1.tar.xz

Signed-off-by: Sebastian Andrzej Siewior <bigeasy@linutronix.de>
---
 drivers/net/ethernet/ti/cpmac.c        |    4 ++--
 drivers/net/ethernet/ti/cpsw.c         |    2 +-
 drivers/net/ethernet/ti/davinci_emac.c |    2 +-
 3 files changed, 4 insertions(+), 4 deletions(-)

Index: linux-stable/drivers/net/ethernet/ti/cpmac.c
===================================================================
--- linux-stable.orig/drivers/net/ethernet/ti/cpmac.c
+++ linux-stable/drivers/net/ethernet/ti/cpmac.c
@@ -1172,8 +1172,8 @@ static int cpmac_probe(struct platform_d
 	snprintf(priv->phy_name, MII_BUS_ID_SIZE, PHY_ID_FMT,
 						mdio_bus_id, phy_id);
 
-	priv->phy = phy_connect(dev, priv->phy_name, cpmac_adjust_link,
-				PHY_INTERFACE_MODE_MII);
+	priv->phy = phy_connect(dev, priv->phy_name, cpmac_adjust_link, 0,
+						PHY_INTERFACE_MODE_MII);
 
 	if (IS_ERR(priv->phy)) {
 		if (netif_msg_drv(priv))
Index: linux-stable/drivers/net/ethernet/ti/cpsw.c
===================================================================
--- linux-stable.orig/drivers/net/ethernet/ti/cpsw.c
+++ linux-stable/drivers/net/ethernet/ti/cpsw.c
@@ -817,7 +817,7 @@ static void cpsw_slave_open(struct cpsw_
 				   1 << slave_port, 0, 0, ALE_MCAST_FWD_2);
 
 	slave->phy = phy_connect(priv->ndev, slave->data->phy_id,
-				 &cpsw_adjust_link, slave->data->phy_if);
+				 &cpsw_adjust_link, 0, slave->data->phy_if);
 	if (IS_ERR(slave->phy)) {
 		dev_err(priv->dev, "phy %s not found on slave %d\n",
 			slave->data->phy_id, slave->slave_num);
Index: linux-stable/drivers/net/ethernet/ti/davinci_emac.c
===================================================================
--- linux-stable.orig/drivers/net/ethernet/ti/davinci_emac.c
+++ linux-stable/drivers/net/ethernet/ti/davinci_emac.c
@@ -1600,7 +1600,7 @@ static int emac_dev_open(struct net_devi
 
 	if (priv->phy_id && *priv->phy_id) {
 		priv->phydev = phy_connect(ndev, priv->phy_id,
-					   &emac_adjust_link,
+					   &emac_adjust_link, 0,
 					   PHY_INTERFACE_MODE_MII);
 
 		if (IS_ERR(priv->phydev)) {
